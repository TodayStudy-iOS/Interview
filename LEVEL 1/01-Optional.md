# Swift에서 옵셔널(Optional)이란 무엇이며, 언제 사용해야 하나요?

옵셔널은 값이 있을수도, 없을수도 있는 경우를 나타내는 타입. 내부적으로 enum으로 구현되어 있다.

```swift
// 옵셔널의 내부 구현
enum Optional<Wrapped> {
    case none     // nil일 경우
    case some(Wrapped)  // 값이 있는 경우
}

// 옵셔널 선언 방법
var name: String?  // ? 를 사용한 선언
var age: Optional<Int>  // 명시적 선언
```

- 값이 없을 수도 있는 경우 사용
    
    ```swift
    // 사용자가 입력한 텍스트 (입력하지 않을 수 있음)
    var userInput: String?
    
    // 검색 결과 (결과가 없을 수 있음)
    func searchUser(id: String) -> User?
    ```
    
- 초기화가 나중에 이뤄지는 속성
- API 응답이나 데이터 파싱: 값이 없을수도 있기 때문에 옵셔널 사용.
- 타입 캐스팅 결과: 타입 캐스팅이 실패할 수도 있기 때문에 옵셔널 사용.
- 델리게이트: 델리게이트는 필수적이지 않고, 설정되지 않은 상황에서도 정상 작동해야하므로 옵셔널로 선언.
- 약한 참조: 메모리에서 해제되면 nil이 할당되므로 옵셔널 사용.

## 옵셔널 바인딩과 강제 언래핑의 차이점은 무엇인가요?

- 옵셔널 바인딩: 언래핑이 실패할 경우에 print문을 출력하는 등의 작업으로 런타임 오류 방지. nil 케이스 처리.
- 강제 언래핑: 옵셔널을 강제로 벗기는 것이기 때문에 값이 무조건 있을 때 사용. nil값을 강제 언래핑하면 런타임 오류 발생.

## 옵셔널 체이닝의 동작 원리는 무엇이며, 어떻게 사용하나요?

- 옵셔널 체이닝: dot을 통해 옵셔널 값에 연속으로 접근할 때, 혹은 접근하려는 값이 하나라도 옵셔널인 경우.
- 내부적으로는 연속적으로 옵셔널 바인딩을 해 값이 하나라도 바인딩되지 않으면(nil이면) nil 반환.
- 옵셔널인 타입에 물음표를 붙이는 것.
  ```swift
  let buildingName = person?.residence?.building
  ```

## 암시적 언래핑 옵셔널(Implicitly Unwrapped Optional)은 어떤 경우에 사용해야 하나요?

- 암시적 언래핑 옵셔널: 타입 뒤에 물음표가 아닌 느낌표를 써서 선언.
    
    ```swift
    var age: Int! = nil
    ```
    
- 선언 시에는 옵셔널이지만 사용할 때는 자동으로 언래핑되는 타입.
- nil값 할당 가능. 하지만 nil 값이 할당된 상황에서 접근시 런타임 오류 발생.
- 초기값은 nil일 수 있지만 실제 사용할 때에는 무조건 값이 있는 경우에 사용.
    - IBOutlet
      ```
      왜 IBOutlet은 암시적 언래핑 옵셔널로 선언될까?
        - 뷰 컨트롤러가 생성될 때, IBOutlet으로 연결된 UI 요소들은 아직 생성되지 않은 상태.
        - 뷰 컨트롤러의 init() 시점에는 nil이어야 하므로 옵셔널 타입이 필요.
        - viewDidLoad() 이후에는 Interface Builder에 의해 모든 아웃렛이 반드시 연결되므로 해당 프로퍼티들이 절대 nil이 아님이 보장.
        - 일반 옵셔널을 사용하면 매번 옵셔널 바인딩이나 강제 언래핑이 필요하므로 암시정 언래핑 옵셔널로 선언.
       ```
    - 클래스 초기화 과정에서 무조건 값이 초기화되는 경우
